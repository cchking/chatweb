<!DOCTYPE html>
<html>

<head>
  <title>Chat</title>
</head>

<body>
  <div id="messages"></div>
  <form id="message-form">
    <input type="text" id="message-input" placeholder="Escribe un mensaje">
    <button type="submit">Enviar</button>
  </form>

  <form id="server-form">
    <input type="text" id="server-input" placeholder="DirecciÃ³n IP del servidor">
    <button type="submit">Conectar</button>
  </form>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();

    const messagesContainer = document.getElementById('messages');
    const messageForm = document.getElementById('message-form');
    const messageInput = document.getElementById('message-input');

    messageForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const message = messageInput.value;
      socket.emit('message', message);
      messageInput.value = '';
    });

    socket.on('message', (data) => {
      const messageElement = document.createElement('p');
      messageElement.innerText = `[${data.sender}]: ${data.content}`;
      messagesContainer.appendChild(messageElement);
    });

    const serverForm = document.getElementById('server-form');
    const serverInput = document.getElementById('server-input');

    serverForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const serverAddress = serverInput.value;
      connectToServer(serverAddress);
      serverInput.value = '';
    });

    function connectToServer(serverAddress) {
      const serverSocket = io(serverAddress);

      serverSocket.on('connect', () => {
        console.log('ConexiÃ³n establecida con el servidor:', serverAddress);
      });

      serverSocket.on('disconnect', () => {
        console.log('Desconectado del servidor:', serverAddress);
      });

      serverSocket.on('message', (data) => {
        const messageElement = document.createElement('p');
        messageElement.innerText = `[${data.sender}]: ${data.content}`;
        messagesContainer.appendChild(messageElement);
      });
    }
  </script>
</body>

</html>